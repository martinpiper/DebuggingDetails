3d05

f 5c00 5fff 12

bank io
f d800 dbe7 0
f 4000 5bff ff
f 6000 7fff ff
f d800 dbe7 3


Colour RAM and bank switch
3d0b  20 41 08    JSR $0841

The draw
3d11  20 7A 16    JSR $167A

Clears the whole bitmap screen to ff and draws the engine block
167a  20 4D 16    JSR $164D

f 6000 7fff aa

Render near track lines (black background)
170d  20 3B 1A    JSR $1A3B
Render next segment black lines
1721  20 3B 1A    JSR $1A3B
Render next segment black lines... loop at 1755 to 1747
174d  20 3B 1A    JSR $1A3B
Rendered one row of track at the horizon
1779  20 2B 2C    JSR $2C2B

Wheel top edge?
3d17  20 D0 14    JSR $14D0


al 841 .ColourRAMUpdate
al 167a .DrawFrame
al 164d .ClearScreenDrawEngine
al 2c23 .ClearScreenDrawEngineSpecific
al 2c2b .FillHorizonEdge
al 1a3b .DrawLines
al 1c1e .DrawChains
al cfc5 .PreDrawLines1
al 177d .PreDrawLines2
al 3f6b .ColourRAMDelta

> 173e 0f


Revisited...
c:\temp\scrm.vsf

al f32e .DrawMapChunkXY
al f2f6 .MapDraw
al f386 .PrepareAndDrawMapForView
al f404 .MapViewRotation	
al cfde .MapViewWaitForKeyboardInput
al 125 .MapDrawRotationY
al 103 .MapDrawXLo
al 104 .MapDrawYLo
al 105 .MapDrawZLo
al 106 .MapDrawXHi
al 107 .MapDrawYHi
al 108 .MapDrawZHi
al c640 .ScreenColumnHeightDrawn


>> Stops the view rotation
a f386 lda #0
nop

>> Remove wait for key and skip map view render
f 3c83 3c87 ea


$106 Coarse X pos
$f39f coarse Y pos	>> $107
$108 Coarse Z pos
$103 fine X pos
$f3a4 fine Y pos	>> $104
$105 fine Z pos

$c640 height table for 0-$7f init to $c0, seems to be the case

>> Skip code update during map draw
a f3d9 jmp f3e8
a f3f0 rts

>> Skip map draw coordinate setup entirely
>> scrm no wait no coordinate setup.vsf
a f386 jmp f3a8

$125 = Y rotation


At f36f A = Model chunk index after screen boundary checks
	A = 06 shows a part near the camera


In .PreDrawLines2
f02f X = model index
49c , X	?
$b120 $b121 X*2 index lo/hi for ?
4ea , X ?


For model 0B
references indirect...
	b2fe
	

a02f = transform read?
